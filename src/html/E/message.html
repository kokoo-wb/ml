<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <!-- 1、如果支持Google Chrome Frame：GCF，则使用GCF渲染；2、如果系统安装ie8或以上版本，则使用最高版本ie渲染；3、否则，这个设定可以忽略。 -->
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <!-- 对视窗缩放等级进行限制，使其适应移动端屏幕大小 -->
    <meta name="viewport" content="width=device-width">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <!-- 当把这个网页添加到主屏幕时的标题（仅限IOS） -->
    <meta name="apple-mobile-web-app-title" content="触电-itouchtv">
    <!-- 添加到主屏幕后全屏显示 -->
    <meta name="apple-touch-fullscreen" content="yes" />
    <!--去除safari中number下划线-->
    <meta name="format-detection" content="telephone=no" />

    <link rel="stylesheet" href="../../css/global.css" />
    <link rel="stylesheet" href="../../css/E/message.css" />

    <title>消息中心</title>

    <script>
        initScreen();
        window.onresize = function() {
            initScreen();
        }

        function defaultfont() {
            var sw = document.documentElement.clientWidth;
            var pw = 750;
            sw = sw > 750 ? 750 : sw < 320 ? 320 : sw;
            var f = 100 * sw / pw;
            document.documentElement.style.fontSize = f + 'px';
        }

        function initScreen() {
            defaultfont();
            setTimeout(function() {
                defaultfont();
            }, 100);
        }
    </script>
</head>

<body>
    <div class="header">
        <p>消息中心</p>
    </div>

    <div class="message-head">
        <img src="../../images/e_ic_chat@2x.png" />
        <span class="message-title">系统消息</span>
        <span class="message-num">12</span>
    </div>

    <ul class="message-list">
        <li>
            <img src="../../images/pic2.png" />
            <div class="message-content">
                <div class="message-title">
                    <p>莉迪亚</p>
                    <span class="time">11:39</span>
                </div>
                <p class="message-desc">你好，可以交个朋友吗？</p>
            </div>
            <a class="delete-btn">删除</a>
        </li>
        <li>
            <img src="../../images/pic2.png" />
            <div class="message-content">
                <div class="message-title">
                    <p>莉迪亚</p>
                    <span class="time">2分钟前</span>
                </div>
                <p class="message-desc">[语音]</p>
            </div>
        </li>
        <li>
            <img src="../../images/pic2.png" />
            <div class="message-content">
                <div class="message-title">
                    <p>莉迪亚</p>
                    <span class="time">15分钟前</span>
                </div>
                <p class="message-desc">你好，可以交个朋友吗？</p>
            </div>
        </li>
        <li>
            <img src="../../images/pic2.png" />
            <div class="message-content">
                <div class="message-title">
                    <p>莉迪亚</p>
                    <span class="time">11:39</span>
                </div>
                <p class="message-desc">你好，可以交个朋友吗？</p>
            </div>
        </li>
    </ul>

    <ul class="footer-bar">
        <li class="active">
            <a>
                <div class="footer-icon"></div>
                <p>首页</p>
            </a>
        </li>
        <li>
            <a>
                <div class="footer-icon"></div>
                <p>商城</p>
            </a>
        </li>
        <li>
            <a>
                <div class="footer-icon"></div>
                <p>店铺</p>
            </a>
        </li>
        <li>
            <a>
                <div class="footer-icon"></div>
                <p>消息</p>
            </a>
        </li>
        <li>
            <a>
                <div class="footer-icon"></div>
                <p>个人中心</p>
            </a>
        </li>
    </ul>
</body>
<script src="../../lib/zepto/zepto.min.js"></script>

<script>
    $('.footer-bar li').click(function() {
        $('.footer-bar li').removeClass('active');
        $(this).addClass('active');
    });

    var messageArr = document.querySelectorAll('.message-list li');
    var sreenWidthRate = $(window).width() / 7.5;

    for (var i = 0; i < messageArr.length; i++) {
        var start = 0;
        var moveing = 0;
        var end = 0;
        messageArr[i].addEventListener('touchstart', function(e) {
            console.log('start:', e);
            start = e.changedTouches[0].pageX;
            moveing = e.changedTouches[0].pageX;
            end = e.changedTouches[0].pageX;
        }, false);

        messageArr[i].addEventListener('touchmove', function(e) {
            moveing = e.changedTouches[0].pageX;
            var movingDistance = moveing - start
            console.log(movingDistance, movingDistance / sreenWidthRate + 'rem', messageArr[i]);
        }, false);

        messageArr[i].addEventListener('touchend', function(e) {
            console.log('end:', e);
            end = e.changedTouches[0].pageX;

            console.log(start, moveing, end)
        }, false);
    }
</script>

</html>